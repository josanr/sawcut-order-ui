var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var g=a[f];if(d.call(b,g,f,a))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var d=0;d<a.length;++d){var b=a[d];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,e){if(d){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+d++,b)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,e={next:function(){if(b<a.length){var f=b++;return{value:d(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var order={order_id:0,orderName:"WebOrder",order_type:1,abs:[],materials:[],absData:{},panels:{},info:{poliuretan:!1,drillProgramm:!0}},c=new Core,addAbsList=function(a){var d=$('#absList option[value="'+a.goods_id+'"]');0===d.length?$("#absList").append($("<option></option>").attr("value",a.goods_id).attr("data-short",a.shortName).attr("data-thick",a.thick).attr("data-width",a.width).text(a.name)):d.prop("selected",!0)},exchangeMat=function(a){var d=$("#oldmat").val();if(0!==$("#materialList #tab-"+
a.goods_id).length)$("#materialchangemodal").modal("hide"),Core.Alert("\u0422\u0430\u043a\u043e\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!");else{var b=$("#"+d+" table tbody").clone(!0).replaceAll($("#"+d+" table tbody"));addMaterialList(a,"x");$("#"+a.goods_id+" table tbody").replaceWith(b);removeMaterialList(" ",d);atachTableEvents(a.goods_id);$("#materialchangemodal").modal("hide")}},removeAbsList=function(){var a=$("#absList option:selected").val();
void 0!==a&&"#"!=a&&($('#absList option[value="'+a+'"]').remove(),$("#workArea .select").each(function(d){$(this).data("absid")==a&&$(this).val("").attr("data-absid","")}))},removeMaterialList=function(a,d){a=void 0===d?a.target.dataset.id:d;$("#materialList li#tab-"+a).remove();$("#workArea #"+a).remove();$("#materialList li").first().children("a").first().click()},addMaterialList=function(a,d){void 0===d&&autoSave();0!==$("#materialList #tab-"+a.goods_id).length?$('#materialList a[href="#'+a.goods_id+
'"]').tab("show"):($("#materialList").append($('<li id="tab-'+a.goods_id+'" style="background-color: #F5F5F5;"></li>').attr("data-length",a.length).attr("data-width",a.width).attr("data-thick",a.thick).attr("data-type",a.goods_type).html('<a href="#'+a.goods_id+'" data-toggle="tab"><button class="close" type="button" id="remove-'+a.goods_id+'" data-id="'+a.goods_id+'" >\u00d7</button><span class="name">'+a.name+"</span></a>")),$("#workArea").append(createWorkTable(a)),$('#materialList a[href="#'+
a.goods_id+'"]').tab("show"),atachTableEvents(a.goods_id))},autos=0,autoSave=function(){autos=1;var a=collectInputData();autos=0;window.localStorage.setItem("ORDER",a)},createWorkTable=function(a){var d='<div id="'+a.goods_id+'" class="tab-pane" data-specid="'+(a.id||0)+'">';d+='\t\t<div class="row-fluid"><button id="editMat-'+a.goods_id+'" class="btn span2" style="margin:0 15px 15px 15px">\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b</button></div>';
d+="\t\t";var b="";0>[2,11,21].indexOf(+order.order_type)&&(b="display:none");d+='\t\t<label class="span2" style="line-height: 30px; '+b+'"><input type="checkbox" id="clientMat-'+a.goods_id+'">\u041c\u0430\u0442. \u043a\u043b\u0438\u0435\u043d\u0442\u0430</label>';d+='\t\t<label class="span2" style="line-height: 30px; '+b+'"><input type="checkbox" id="onlyAbs-'+a.goods_id+'" disabled="disabled">\u0422\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u043a\u043b\u0435\u0439\u043a\u0430</label>';d=d+'\t<table class="simple-table">\t\t\t<thead>\t\t\t\t<tr>\t\t\t\t<th>\u2116</th>\t\t\t\t<th>\u0414\u043b\u0438\u043d\u043d\u0430</th>\t\t\t\t<th>\u0428\u0438\u0440\u0438\u043d\u0430</th>\t\t\t\t<th>\u041a\u043e\u043b.</th>\t\t\t\t<th>L1</th>\t\t\t\t<th>L2</th>\t\t\t\t<th>W1</th>\t\t\t\t<th>W2</th>\t\t\t\t<th>\u0427\u043f\u0443</th>\t\t\t\t<th>\u0421\u043a\u043b\u0435\u0439\u043a\u0430</th>\t\t\t\t<th>\u041f\u0430\u0437</th>\t\t\t\t<th>\u041f\u0440\u0438\u0441\u0430\u0434\u043a\u0430</th>\t\t\t\t<th>\u0423\u0433\u043e\u043b</th>\t\t\t\t<th>\u0423\u043f\u0438\u043b</th>\t\t\t\t<th>\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439</th>\t\t\t\t<th>\u0423\u0434\u0430\u043b\u0438\u0442\u044c</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t\t<tbody>'+
createWorkLine(1);return d+"\t\t\t\t</tbody>\t\t</table><br /></div>"},createWorkLine=function(a){var d='\t\t\t\t\t\t<tr class="line-'+a+'" data-paramid="0" data-pos="'+a+'" data-modelindex="0">\t\t\t\t\t\t\t<td class="pos" >'+(a+'</td>\t\t\t\t\t\t\t<td class="length"><input type="text" class="simpleinput" style="width:60px" /></td>\t\t\t\t\t\t\t<td class="width"><input type="text" class="simpleinput" style="width:60px" /></td>');d+='\t\t\t\t\t\t\t<td class="num"><input type="text" class="simpleinput" style="width:60px" /></td>';
d+='\t\t\t\t\t\t\t<td class="l1"><input type="text" class="simpleinput select" style="width:140px" /></td>';d+='\t\t\t\t\t\t\t<td class="l2"><input type="text" class="simpleinput select" style="width:140px" /></td>';d+='\t\t\t\t\t\t\t<td class="w1"><input type="text" class="simpleinput select" style="width:140px" /></td>';d+='\t\t\t\t\t\t\t<td class="w2"><input type="text" class="simpleinput select" style="width:140px" /></td>';d+='\t\t\t\t\t\t\t<td class="cpu center-content"><input type="checkbox" class="simpleinput norange" style="width:30px" /></td>';
d+='\t\t\t\t\t\t\t<td class="glue center-content"><input type="checkbox" class="simpleinput norange" style="width:30px" /></td>';d+='\t\t\t\t\t\t\t<td class="paz center-content"><input type="checkbox" class="simpleinput norange" style="width:30px" /></td>';d+='\t\t\t\t\t\t\t<td class="pris center-content"><input type="checkbox" class="simpleinput norange" style="width:30px" /></td>';d+='\t\t\t\t\t\t\t<td class="corner center-content"><input type="checkbox" class="simpleinput norange" style="width:30px" /></td>';
d+='\t\t\t\t\t\t\t<td class="upil center-content"><input type="checkbox" class="simpleinput norange" style="width:60px" /></td>';d+='\t\t\t\t\t\t\t<td class="comment"><input type="text" class="simpleinput" style="width:120px" /></td>';return d+('\t\t\t\t\t\t\t<td class="delete center-content"><a class="icon-remove norange" id="'+a+'"> </a></td>\t\t\t\t\t\t</tr>')},atachTableEvents=function(a){$("#"+a+" table tbody").on("click","input",function(a){$(this).removeClass("red")});$("#"+a+" table tbody").off("click",
"a");$("#"+a+" table tbody").on("click","a",function(d){1<$("#"+a+" table tbody tr").length&&($("#"+a+" table tbody tr.line-"+$(this).attr("id")).remove(),$("#"+a+" table tbody tr").each(function(a){a+=1;$(this).attr("class","line-"+a);$(this).children(".pos").html(a);$(this).attr("data-pos",a);$(this).children(".delete").children(".icon-remove").attr("id",a)}))});$("#editMat-"+a).on("click",function(){$("#oldmat").val(a);$("#materialchangemodal").modal("show")});$("#clientMat-"+a).on("change",function(){1==
$(this).prop("checked")?$("#onlyAbs-"+a).prop("disabled",!1):$("#onlyAbs-"+a).prop("checked",!1).prop("disabled",!0)});$("#importtext-"+a).on("click",function(){$("#recieveMat").val(a);$("#importMod").modal("show")});$("#remove-"+a).on("click",removeMaterialList);$("#"+a+" table tbody").on("click","input",function(a){a=$(a.currentTarget).parent().parent();var b=a.find("td.length").find("input").val(),d=a.find("td.width").find("input").val(),f=a.find("td.pris").find("input"),g=a.find("td.cpu").find("input"),
l=a.find("td.paz").find("input"),k=a.find("td.corner").find("input");(180>b||70>d)&&!0===f.prop("checked")?a[0].style.backgroundColor="#f2dede":!(420>b||60>d)||!0!==f.prop("checked")||1!=l.prop("checked")&&1!=g.prop("checked")&&1!=k.prop("checked")?a[0].style.backgroundColor="#ffffff":a[0].style.backgroundColor="#f2dede"});$("#"+a+" table tbody").on("keyup","td",function(d){if(d.currentTarget.classList.contains("length")||d.currentTarget.classList.contains("width")){var b=$(d.currentTarget).parent(),
e=b.find("td.length").find("input").val(),f=b.find("td.width").find("input").val(),g=b.find("td.pris").find("input"),l=b.find("td.cpu").find("input");b.find("td.paz").find("input");b.find("td.corner").find("input");170<e&&2800>e&&50<f&&900>f||170<f&&2800>f&&50<e&&900>e?g.prop("disabled",!1):g.prop("disabled",!0);(2450<e||1200<f)&&6==document.getElementById("tab-"+a).dataset.type?l.prop("disabled",!0).prop("checked",!1):l.prop("disabled",!1)}13===d.which&&($(this).children().first().hasClass("select")||
$(this).children().first().hasClass("norange"))&&(b=$(this).children().first(),b.hasClass("norange")?b.prop("checked")?b.prop("checked",!1):b.prop("checked",!0):b.hasClass("select")&&($("#recieveinput").val(a+"-"+$(this).parent().attr("data-pos")+"-"+$(this).attr("class")),$("#absmodal").modal("show")));39===d.which&&$(this).children().first().hasClass("simpleinput")&&(b=$(this).next().children().first(),f=$(this).children().first(),$(this).next().hasClass("delete")&&0===$(this).parent().next().length?
(b=parseInt($(this).parent().parent().children().length),b++,$(this).parents("tbody").append(createWorkLine(b)),$(this).parent().next().children(".length").children().first().focus()):f.hasClass("norange")||f.hasClass("select")?b.focus():(e=f.get(0).selectionStart,f=f.val().length,e==f&&b.focus()));if(37===d.which&&$(this).children().first().hasClass("simpleinput")&&!$(this).prev().hasClass("pos"))if(b=$(this).children().first(),e=$(this).prev().children().first(),b.hasClass("norange")||b.hasClass("select"))e.focus();
else try{var k=b.get(0).selectionStart,m=e.val().length;0==k&&(e.focus(),e[0].setSelectionRange(m,m))}catch(h){}38===d.which&&$(this).children().first().hasClass("simpleinput")&&(k=$(this).attr("class").split(" ")[0],$(this).parent().prev().children("."+k).children().first().focus());40===d.which&&$(this).children().first().hasClass("simpleinput")&&(0===$(this).parent().next().length?(k=parseInt($(this).parent().children(".pos").text()),k++,$(this).parents("tbody").append(createWorkLine(k)),$(this).parent().next().children(".length").children().first().focus()):
(k=$(this).attr("class").split(" ")[0],$(this).parent().next().children("."+k).children().first().focus()));9===d.which&&$(this).next().hasClass("delete")&&(0===$(this).parent().next().length&&(d=parseInt($(this).parent().children(".pos").text()),d++,$(this).parents("tbody").append(createWorkLine(d))),$(this).parent().next().children(".length").children().first().focus())})},collectInputData=function(){var a=0,d=[],b=0;order.panels={};for(var e=document.querySelectorAll("#absList option"),f=0;f<e.length;f++){var g=
e[f];"#"!=g.value&&void 0!==g.value&&(order.absData[g.value]={},order.absData[g.value].totalLength=0,order.absData[g.value].matName=g.innerText,order.absData[g.value].shortName=g.dataset.short,order.absData[g.value].thick=g.dataset.thick,order.absData[g.value].width=g.dataset.width)}$("#workArea div").each(function(f){var e=$(this).attr("id");if(void 0!==e){f=$("#materialList li#tab-"+e+" a span.name").text();var g=$(this).find("table tbody tr"),h=0,l=$("#materialList li#tab-"+e);order.panels[""+
e]={};order.panels[""+e].matName=f;order.panels[""+e].id=this.dataset.specid;order.panels[""+e].clientMat=$(this).find("#clientMat-"+e).prop("checked");order.panels[""+e].onlyAbs=$(this).find("#onlyAbs-"+e).prop("checked");order.panels[""+e].origlength=l.attr("data-length");order.panels[""+e].origwidth=l.attr("data-width");order.panels[""+e].origthick=l.attr("data-thick");order.panels[""+e].origtype=l.attr("data-type");order.panels[""+e].params=[];g.each(function(){order.panels[""+e].params[h]={};
order.panels[""+e].params[h].id=this.dataset.paramid;order.panels[""+e].params[h].pos=this.dataset.pos;order.panels[""+e].params[h].modelIndex=this.dataset.modelindex;$(this).find(".glue input").prop("checked");var a=+$(this).find(".length input").val(),f=+$(this).find(".width input").val(),g=+$(this).find(".num input").val();if(isNaN(a)||""==a||a>order.panels[""+e].origlength)$(this).find(".length input").addClass("red"),d.push(1);if(isNaN(f)||""==f||f>order.panels[""+e].origwidth)$(this).find(".width input").addClass("red"),
d.push(1);if(isNaN(g)||""==g)$(this).find(".num input").addClass("red"),d.push(1);50>a&&($(this).find(".length input").addClass("red"),d.push(1));25>f&&($(this).find(".width input").addClass("red"),d.push(1));order.panels[""+e].params[h].length=a;order.panels[""+e].params[h].width=f;order.panels[""+e].params[h].num=g;b=+$(this).find(".l1 .select").attr("data-absid");isNaN(b)||""==$(this).find(".l1 .select").val()?order.panels[""+e].params[h].l1=0:order.panels[""+e].params[h].l1=b;b=+$(this).find(".l2 .select").attr("data-absid");
isNaN(b)||""==$(this).find(".l2 .select").val()?order.panels[""+e].params[h].l2=0:order.panels[""+e].params[h].l2=b;b=+$(this).find(".w1 .select").attr("data-absid");isNaN(b)||""==$(this).find(".w1 .select").val()?order.panels[""+e].params[h].w1=0:order.panels[""+e].params[h].w1=b;b=+$(this).find(".w2 .select").attr("data-absid");isNaN(b)||""==$(this).find(".w2 .select").val()?order.panels[""+e].params[h].w2=0:order.panels[""+e].params[h].w2=b;order.panels[""+e].params[h].cpu=$(this).find(".cpu input").prop("checked");
order.panels[""+e].params[h].glue=$(this).find(".glue input").prop("checked");order.panels[""+e].params[h].paz=$(this).find(".paz input").prop("checked");!0!==$(this).find(".pris input").prop("disabled")?order.panels[""+e].params[h].pris=$(this).find(".pris input").prop("checked"):order.panels[""+e].params[h].pris=!1;order.panels[""+e].params[h].corner=$(this).find(".corner input").prop("checked");order.panels[""+e].params[h].upil=$(this).find(".upil input").prop("checked");order.panels[""+e].params[h].comment=
$(this).find(".comment input").val();h++});a++}});if(0===autos){if(0===Object.getOwnPropertyNames(order.panels).length)return Core.Alert("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430!"),!1;for(e=0;e<d.length;e++)if(1===d[e])return Core.Alert("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!"),
!1}e=JSON.stringify(order);$("#result").val(e);return e},updateInit=function(){var a=JSON.parse(window.localStorage.getItem("ORDER"));if(null===a||void 0===a.panels||0===Object.keys(a.panels).length)return!1;$("#poliuretan").prop("checked",order.info.poliuretan);$("#drillProgramm").prop("checked",order.info.drillProgramm);if(void 0!==a.absData)for(var d in a.absData){var b={};b.goods_id=d;b.name=a.absData[d].matName;b.thick=a.absData[d].thick;b.shortName=a.absData[d].shortName;addAbsList(b)}for(var e in a.panels)if("undefined"!==
e){d=a.panels[e];b={};b.goods_id=e;b.id=d.id;b.name=dsp[e].name;b.length=d.origlength;b.width=d.origwidth;b.thick=d.origthick;b.goods_type=d.origtype;addMaterialList(b,!0);$("#clientMat-"+e).prop("checked",d.clientMat||!1);d.clientMat&&$("#onlyAbs-"+e).prop("checked",d.onlyAbs||!1).prop("disabled",!1);b=d.params;for(var f=0;f<b.length;f++)if(void 0==b[f].ob){0!=f&&$("#"+e+" table tbody").append(createWorkLine(f+1));var g=$("#"+e+" table tbody tr.line-"+(f+1));0!=b[f].modelIndex&&(g.find(".pos").html(b[f].modelIndex),
g.attr("data-modelindex",b[f].modelIndex));g.attr("data-paramid",b[f].id);g.find(".length input").val(b[f].length);g.find(".width input").val(b[f].width);g.find(".num input").val(b[f].num);0!=b[f].l1&&null!=b[f].l1&&(d=a.absData[b[f].l1].shortName,g.find(".l1 .select").attr("data-absid",b[f].l1).val(d));0!=b[f].l2&&null!=b[f].l2&&(d=a.absData[b[f].l2].shortName,g.find(".l2 .select").attr("data-absid",b[f].l2).val(d));0!=b[f].w1&&null!=b[f].w1&&(d=a.absData[b[f].w1].shortName,g.find(".w1 .select").attr("data-absid",
b[f].w1).val(d));0!=b[f].w2&&null!=b[f].w2&&(d=a.absData[b[f].w2].shortName,g.find(".w2 .select").attr("data-absid",b[f].w2).val(d));b[f].corner&&g.find(".corner input").prop("checked",!0);b[f].cpu&&g.find(".cpu input").prop("checked",!0);b[f].glue&&g.find(".glue input").prop("checked",!0);b[f].paz&&g.find(".paz input").prop("checked",!0);b[f].pris&&g.find(".pris input").prop("checked",!0);b[f].upil&&g.find(".upil input").prop("checked",!0);b[f].comment&&g.find(".comment input").val(b[f].comment)}}},
filterList=function(a){var d="";void 0===a&&(a="");for(var b in absList){var e=a.replace("*",".").split(".").join(".*");absList[b].name.match(new RegExp(e,"ig"))&&(d+='<option class="'+absList[b].goods_id+'" value='+absList[b].goods_id+' data-index="'+b+'" data-thick="'+absList[b].thick+'" data-type="'+absList[b].goods_type+'">'+absList[b].name+"</option>")}return d};
$(document).ready(function(){updateInit();$("#absInitSelect").html(filterList());$("#filterQuery").on("keyup",function(){$("#absInitSelect").html(filterList($(this).val()))});$("#absInitSelect").on("dblclick","option",function(){console.log($(this).data("index"));addAbsList(absList[$(this).data("index")])});$("#materialList").on("change",function(){$(".activeWork").removeClass("activeWork").addClass("hidden");$("#"+$(this).val()).removeClass("hidden").addClass("activeWork")});$("#poliuretan").on("change",
function(){order.info.poliuretan=$(this).prop("checked")});$("#drillProgramm").on("change",function(){order.info.drillProgramm=$(this).prop("checked")});$("#save").on("click",function(){$("#grey").show();$("#loading").show();var a=collectInputData();window.localStorage.setItem("ORDER",a);!1===a?($("#grey").hide(),$("#loading").hide()):c.act("post","controller.php",{order:a},function(a){$("#grey").hide();$("#loading").hide();var b=a.content;a=a.name;var d=document.createElement("a");d.href="data:application/zip;base64, "+
b;d.target="_blank";d.download="order.nerm";void 0!==a&&(d.download=a);d.click()})});$("#reset").on("click",function(){window.localStorage.setItem("ORDER",JSON.stringify({order_id:0,orderName:"WebOrder",order_type:1,abs:[],materials:[],absData:{},panels:{},info:{poliuretan:!1,drillProgramm:!0}}));window.location.reload()});$("#deleteAbs").on("click",removeAbsList);$("#addAbs").on("click",function(){$("#filterQuery").show();$("#absInitSelect").show();$("#absList").attr("size",5);$("#absmodal").modal("show");
$("#recieveinput").val("")});$("#closeabsmodal").on("click",function(){var a=$("#recieveinput").val().split("-");if(2===a.length){var d=$(this).children().filter(":selected");$("#"+a[0]+" table tbody tr.line-"+a[1]+" td."+a[2]).children().first().attr("data-absid",d.val()).val(d.attr("data-short"));$("#"+a[0]+" table tbody tr.line-"+a[1]+" td."+a[2]).children().first().focus()}$("#absmodal").modal("hide")});$("#absmodal").on("shown",function(){$("#absList").focus()});$("#absmodal").on("hidden",function(){$("#filterQuery").hide();
$("#absInitSelect").hide();$("#absList").attr("size",25)});$("#absList").on("keyup",function(a){if(13===a.which){a=$("#recieveinput").val().split("-");var d=$(this).children().filter(":selected");$("#"+a[0]+" table tbody tr.line-"+a[1]+" td."+a[2]).children().first().attr("data-absid",d.val()).val(d.attr("data-short"));$("#"+a[0]+" table tbody tr.line-"+a[1]+" td."+a[2]).children().first().focus();$("#absmodal").modal("hide")}});$("#closeImportmodal").on("click",function(){$("#importMod").modal("hide");
var a=$("#textareaMod").val(),d=$("#recieveMat").val();a=a.split("\n");var b=+$("#"+d+" table tbody tr").last().attr("class").split("-")[1];1!=b?b++:$("#"+d+" table tbody tr").last().remove();for(var e=0;e<a.length;e++){var f=a[e].split("\t");if(3<=f.length){$("#"+d+" table tbody").append(createWorkLine(b+e));var g=$("#"+d+" table tbody tr.line-"+(b+e));isNaN(+f[0])?g.find(".length input").addClass("red"):g.find(".length input").val(f[0]);isNaN(+f[1])?g.find(".width input").addClass("red"):g.find(".width input").val(f[1]);
isNaN(+f[2])?g.find(".num input").addClass("red"):g.find(".num input").val(f[2])}}})});
