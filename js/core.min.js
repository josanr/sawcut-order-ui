var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
function Core(a){this.jwt=window.jwt||a||"";this.filial=1;try{void 0!==process&&void 0!==process.mainModule.exports.config&&void 0!=process.mainModule.exports.config.filial&&(this.filial=process.mainModule.exports.config.filial)}catch(b){}}Core.jwtStoreIndex="JWT";Core.prototype.Alert=function(a,b){var c=$("#alert-modal");void 0!=b&&c.find(".modal-header h3").html(b);void 0!=a&&c.find(".modal-body p").html(a);c.on("shown",function(){$("#closeAlertModal").focus()});c.modal("show")};
Core.Alert=function(a,b){var c=$("#alert-modal");void 0!=b&&c.find(".modal-header h3").html(b);void 0!=a&&c.find(".modal-body p").html(a);c.on("shown",function(){$("#closeAlertModal").focus()});c.modal("show")};Core.prototype.Wait=function(a){"show"==a?($("#loading").css({top:$(window).height()/2-64+"px",left:$(window).width()/2-64+"px"}).show(),$("#grey").css({height:$(document).height()+"px",width:$(document).width()+"px"}).show()):"hide"==a&&($("#grey").hide(),$("#loading").hide())};
Core.Wait=function(a){"show"==a?($("#loading").css({top:$(window).height()/2-64+"px",left:$(window).width()/2-64+"px"}).show(),$("#grey").css({height:$(document).height()+"px",width:$(document).width()+"px"}).show(),$("#page-dimmer").addClass("active")):"hide"==a&&($("#grey").hide(),$("#loading").hide(),$("#page-dimmer").removeClass("active"))};
Core.handleFail=function(a,b,c){if(401===a.status)"production"===window.location.pathname.split("/")[0]?window.location.href="/production/login/login":window.location.href="/site/login";else return Core.Wait("hide"),Core.Alert(a.responseText),!1};Core.prototype.post=function(a,b,c,d){this.act("post",a,b,c,d)};Core.prototype.get=function(a,b,c,d){this.act("get",a,b,c,d)};Core.prototype.put=function(a,b,c,d){this.act("put",a,b,c,d)};Core.prototype.del=function(a,b,c,d){this.act("del",a,b,c,d)};
Core.prototype.getHtml=function(a,b,c,d){void 0==d&&Core.Wait("show");$.ajax({url:a,method:"GET",data:b,dataType:"text",beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+self.jwt)}}).fail(Core.handleFail).done(function(a){Core.Wait("hide");c(a)})};
Core.prototype.act=function(a,b,c,d,e){var f=null,g=this;switch(a){case "post":f="POST";break;case "get":f="GET";break;case "put":f="PUT";break;case "delete":case "del":f="DELETE"}if(!f)throw Error("Type of action is null");void 0==e&&Core.Wait("show");$.ajax({url:b,method:f,data:c,dataType:"text",beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+g.jwt)}}).fail(Core.handleFail).done(function(a){try{var b=JSON.parse(a)}catch(h){return Core.Wait("hide"),Core.Alert("JSON parse error: "+
h.message),!1}if(b.error)return Core.Wait("hide"),Core.Alert(b.error),!1;Core.Wait("hide");d(b)})};Core.newDiv=function(){return document.createElement("div")};Core.newBtn=function(a){var b=document.createElement("button");b.className="btn";b.innerHTML=a;b.style.textOverflow="ellipsis";b.style.overflow="hidden";return b};Core.newInp=function(){var a=document.createElement("input");a.type="text";return a};Core.newDate=function(){var a=document.createElement("input");a.type="date";return a};
Core.createTable=function(){var a=document.createElement("table");a.className="table table-bordered table-striped";var b=document.createElement("thead"),c=document.createElement("tbody");a.appendChild(b);a.appendChild(c);return{table:a,head:b,body:c}};
Core.createMod=function(){var a=document.createElement("div");a.className="modal hide";var b=document.createElement("div");b.className="modal-header";b.innerHTML='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';var c=document.createElement("h3"),d=document.createElement("div");d.className="modal-body";var e=document.createElement("div");e.className="modal-footer";var f=document.createElement("a");f.href="#";f.dataset.dismiss="modal";f.className="btn pull-left";
f.innerHTML="\u041e\u0442\u043c\u0435\u043d\u0430";var g=document.createElement("a");g.href="#";g.className="btn btn-primary";g.innerHTML="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c";b.appendChild(c);e.appendChild(f);e.appendChild(g);a.appendChild(b);a.appendChild(d);a.appendChild(e);return{modal:a,headerHolder:b,header:c,bodyHolder:d,footerHolder:e,dissmis:f,save:g,show:function(){$(a).modal("show")},hide:function(){$(a).modal("hide")}}};
